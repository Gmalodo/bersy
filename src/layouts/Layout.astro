---
import '../styles/global.css'
import chateau from "../assets/berzy-chateau.jpg"
import landscape from "../assets/landscape.svg"
import landscapeSecond from "../assets/2.svg"
import flowers from "../assets/flowers.svg"
---
<!doctype html>
<html lang="en">
	<head>
		<!-- Encodage & responsive -->
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<!-- SEO de base -->
		<title>Château de Berzy — Visite et Ateliers Médiévaux</title>
		<meta
			name="description"
			content="Découvrez le Château de Berzy : une visite historique au cœur du patrimoine médiéval et des ateliers manuels de poterie, menuiserie et taille de pierre. Vivez une expérience authentique et conviviale."
		/>
		<meta name="title" content="Château de Berzy — Visite et Ateliers Médiévaux" />
		<meta
			name="keywords"
			content="château de Berzy, visite château, ateliers médiévaux, poterie, menuiserie, taille de pierre, patrimoine, Aisne, Soissons, tourisme culturel"
		/>
		<meta name="author" content="Château de Berzy" />

		<!-- Favicon & manifest -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" href="/berzy-chateau.jpg" />
		<link rel="manifest" href="/site.webmanifest" />

		<!-- Canonical -->
		<link rel="canonical" href="https://chateaudeberzy.fr/" />

		<!-- Open Graph (Facebook / LinkedIn) -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://chateaudeberzy.fr/" />
		<meta property="og:title" content="Château de Berzy — Visite et Ateliers Médiévaux" />
		<meta
			property="og:description"
			content="Plongez dans l’histoire au Château de Berzy : visites guidées, ateliers de poterie, menuiserie et taille de pierre. Une journée d’immersion médiévale pour toute la famille."
		/>
		<meta property="og:image" content="https://chateaudeberzy.fr/berzy-chateau.jpg" />
		<meta property="og:locale" content="fr_FR" />
		<meta property="og:site_name" content="Château de Berzy" />

		<!-- Twitter Cards -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content="https://chateaudeberzy.fr/" />
		<meta name="twitter:title" content="Château de Berzy — Visite et Ateliers Médiévaux" />
		<meta
			name="twitter:description"
			content="Visitez le Château de Berzy et participez à nos ateliers artisanaux inspirés du Moyen Âge. Poterie, menuiserie et taille de pierre pour petits et grands."
		/>
		<meta name="twitter:image" content="https://chateaudeberzy.fr/berzy-chateau.jpg" />

		<!-- Accessibilité et performances -->
		<meta name="theme-color" content="#8b7355" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />

		<!-- Schema.org JSON-LD pour enrichir les résultats de recherche -->
		<script type="application/ld+json">
			{
				"@context": "https://schema.org",
				"@type": "TouristAttraction",
				"name": "Château de Berzy",
				"url": "https://chateaudeberzy.fr/",
				"description": "Visite du Château de Berzy et ateliers manuels médiévaux : poterie, menuiserie et taille de pierre.",
				"image": "https://chateaudeberzy.fr/berzy-chateau.jpg",
				"address": {
					"@type": "PostalAddress",
					"streetAddress": "Rue du Château",
					"addressLocality": "Berzy-le-Sec",
					"postalCode": "02200",
					"addressCountry": "FR"
				},
				"openingHours": "Tu-Su 10:00-18:00"
			}
		</script>

		<!-- Astro meta -->
		<meta name="generator" content={Astro.generator} />

	</head>
	<body>
		<slot />
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>
<script>
	window.addEventListener("DOMContentLoaded", () => {
		const bg = document.getElementById("bg");
		const middle = document.getElementById("middle");
		const flowers = document.getElementById("flowers");
		const indicator = document.getElementById("scroll-indicator");
		const home = document.getElementById("home-bg");
		const page = document.getElementById("page-bg");

		function interpolate(value: number, inputRange: number[], outputRange: number[]) {
			for (let i = 0; i < inputRange.length - 1; i++) {
				const inMin = inputRange[i];
				const inMax = inputRange[i + 1];
				const outMin = outputRange[i];
				const outMax = outputRange[i + 1];

				if (value >= inMin && value <= inMax) {
					const ratio = (value - inMin) / (inMax - inMin);
					return outMin + ratio * (outMax - outMin);
				}
			}
			return value < inputRange[0]
				? outputRange[0]
				: outputRange[outputRange.length - 1];
		}

		window.addEventListener("scroll", () => {
			const scrollY = window.scrollY;

			if (!flowers || !middle || !bg || !indicator || !home) return;
			// Flowers
			const flowersY = interpolate(scrollY, [0, 600], [0, 100]);
			const flowersOpacity = interpolate(scrollY, [0, 600], [1, 0]);
			flowers.style.transform = `translateY(${flowersY}px)`;
			flowers.style.opacity = `${flowersOpacity}`;

			// Middle
			const middleY = interpolate(scrollY, [0, 500, 1000], [0, 50, 500]);
			const middleScale = interpolate(scrollY, [0, 700], [1, 1.3]);
			middle.style.transform = `translateY(${middleY}px) scale(${middleScale})`;

			// Background
			const bgY = interpolate(scrollY, [0, 700, 1000, 1150], [0, 0, 300, 1500]);
			const bgScale = interpolate(scrollY, [0, 700, 1000, 1150], [1, 1.1, 2, 10]);
			bg.style.transform = `translateY(${bgY}px) scale(${bgScale})`;

			// Scroll indicator (content fade)
			const indicatorOpacity = interpolate(scrollY, [0, 800, 1000], [1, 1, 0]);
			indicator.style.opacity = `${indicatorOpacity}`;

			const homeOpacity = interpolate(scrollY, [0, 1000, 1150], [1, 1, 0]);
			home.style.opacity = `${homeOpacity}`;

			const pageOpacity = interpolate(scrollY, [0, 1000, 1150], [0, 0, 1]);
			page!.style.opacity = `${pageOpacity}`;

		});
	});
</script>